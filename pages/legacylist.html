<!DOCTYPE html>
<html lang="pt-BR" data-bs-theme="dark">
<head>
    <title>Demonlist BR</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Lista de fases brasileiras mais difíceis de Geometry Dash.">
    <link rel="shortcut icon" type="image/x-icon" href="/assets/img/favicon.ico">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="/assets/css/style.css" rel="stylesheet">
    <link href="/assets/css/levelDetails.css" rel="stylesheet">
</head>
<body>
    <script src="/assets/script/addNavbar.js"></script>
    <section id="navbar"></section>

    <section>
        <div id="legacy-header" class="text-center">
            <h1>Legacy</h1>
            <p>Fases que foram removidas da lista principal para dar espaço a outras mais difíceis.</p>
            <p class="fw-light">Esta lista não é mais atualizada e não aceita novos recordes.</p>
        </div>
    </section>

    <div id="timeWarp" class="d-flex flex-column align-items-center">
        <div>
            <p id="timeWarp-tip">Você está vendo a lista atual, para ver as versões anteriores, selecione uma data abaixo e clique no botão.</p>
        </div>
        <div class="input-group mb-3 justify-content-center">
            <input type="date" id="timeWarpPicker" class="border rounded-start" value="1970-01-01" min="yyyy-MM-dd" max="yyyy-MM-dd"/>
            <button class="btn btn-primary" id="timeWarpButton" type="button" data-bs-toggle="tooltip" title="Ver lista nessa data" onclick="triggerWarp()">
                <i class="fa-solid fa-clock"></i>
            </button>
        </div>
    </div>
    <script>
        function getToday(){
            let date = new Date();
            let year = date.getFullYear();
            let month = date.getMonth() + 1;
            let day = date.getDate();
            return `${year}-${month < 10 ? '0' + month : month}-${day < 10 ? '0' + day : day}`;
        }
        function triggerWarp(){
            const params = new URLSearchParams(window.location.search);
            const date = document.getElementById("timeWarpPicker").value;
            if(date === getToday() && !params.has("date")) return;
            if(date === getToday() && params.has("date"))
            {
                window.location.href = "/pages/legacylist.html";
                return;
            }
            window.location.href = `/pages/legacylist.html?date=${date}`;
        }
    </script>

    <section id="error-id-section" class="text-center" style="display: none;">
        <img id="error-id-img" src="https://media1.tenor.com/m/CseB-FToBcoAAAAC/404-error-404.gif" style="margin: 20px;" alt="Error Image">
        <h3>Nenhum level aqui ainda!</h3>
        <p>Aparentemente as fases ainda não estão fáceis o suficiente...</p>
        <button class="btn btn-secondary" onclick="window.location.href = '/';">Voltar para a página inicial</button>
    </section>
    <script>
        // sortear um número pra decidir qual gif de erro mostrar, por que não?
        document.addEventListener('DOMContentLoaded', (event) => {
            const errorIdImg = document.getElementById("error-id-img");
            if(Math.random() < 0.5){
                errorIdImg.src = "https://media1.tenor.com/m/qBbREqnOqtkAAAAC/fatal-error-turn-it-off.gif";
            }
        });
    </script>
    
    <section class="list">
        <div id="ListContent"></div>
    </section>

    <button
        type="button"
        class="btn btn-primary btn-floating btn-lg"
        id="btn-back-to-top"
        >
        <i class="fas fa-arrow-up"></i>
    </button>

    <script type="module" src="/assets/script/script.js"></script>
    <script src="/assets/script/previousVersions.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
</body>
</html>